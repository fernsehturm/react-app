<!doctype html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8" />
		<style type="text/css">
			html, body, #root {
				display: block;
				height: 100%;
				margin: 0px;
				min-width: 320px;
				max-width: 100%;
				overflow-x: hidden;
			}			
		</style>
	</head>
	<body>
		<div id="root"></div>
		<script>
			/* Add environemnt variables here  */
			window.__NODE_ENV__ = "<%= htmlWebpackPlugin.options.nodeEnv %>";
			window.__DOMAIN__ = "<%= htmlWebpackPlugin.options.domain %>";
			window.__APP_SUBDOMAIN__ = "<%= htmlWebpackPlugin.options.appSubdomain %>";
			window.__APP_NAME__ = "<%= htmlWebpackPlugin.options.appName %>";
			window.__WEB_NAME__ = "<%= htmlWebpackPlugin.options.webName %>";
			window.__API_EXAMPLE__ = "<%= htmlWebpackPlugin.options.apiExample %>";
			
			const subdomain = window.location.hostname.split('.').slice(0, -2).join('.')
			var scr = document.createElement('script');
			
			const appBundleUrl = `/${__APP_NAME__}.bundle.js`;
			const webBundleUrl = `/${__WEB_NAME__}.bundle.js`;

			if (subdomain.length === 0 || subdomain.localeCompare(__APP_SUBDOMAIN__) === 0) {
				scr.setAttribute('src', appBundleUrl );
			} else {
				scr.setAttribute('src', webBundleUrl );
			}
			
			document.body.appendChild(scr);
		</script>
	</body>
</html>